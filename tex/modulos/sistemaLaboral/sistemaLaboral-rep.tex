\begin{center}
\begin{tabular}{|l|} 
\hline
\\
SistemaLaboral \textbf{se representa con} vector(gremio) \\
\hline
\end{tabular}
\end{center}

\subsubsection{Descripci\'on de los campos}

	El vector gremios guarda los gremios del sistema. A cada uno se le asigna durante la inicializaci\'on un id de gremio y un id de grupo, tomando nat's consecutivos comenzando en 0 (en particular, el id de gremio de cada gremio coincide con su \'indice en el vector).

	Por otro lado, dado que la relaci\'on de alianza entre gremios es sim\'etrica y transitiva, se puede dividir al conjunto de gremios del sistema en grupos disjuntos de aliados.

	Utilizando esta propiedad, se representa la red de alianzas entre gremios etiquetando a cada grupo de aliados mediante un id de grupo, de forma tal que dos gremios distintos ser\'an aliados cuando sus n\'umeros de grupo coincidan. El vector gruposDeAliados agrupa esta informaci\'on, asignando a cada gremio un id de grupo, utilizando su id como \'indice en el vector. 

	Adicionalmente, los ids de grupo se asignan de forma consecutiva comenzando en 0, lo cual permite que sean utilizados para indexar un vector.

\subsubsection{Invariante de Representaci\'on}

\paragraph{Descripci\'on informal}

\begin{enumerate}
	\item Ninguna empresa aparece en m\'as de un gremio.
	\item El id de gremio de cada gremio en el vector coincide con su \'indice.
	\item Los id's de grupo de los gremios son naturales consecutivos, comenzando en 0 (no hay 'agujeros' en la secuencia de id's de grupo).
\end{enumerate}

\paragraph{Expresi\'on formal \\}
\begin{RepFormal}{vector(gremio)}{sl}
	\repItem{
		(\paratodof{empresa}{\,em})\,((\lnot \exists \,g1,g2:gremio\, ) \, (g1 \distinto g2 \ly esta?(sl, g1) \ly esta?(sl, g2) \land \\ em \in empresas(g1) \land em \in empresas(g2) )
	}{\ly}
	\repItem{
		(\paratodof{nat}{i})\,\, i \menor Longitud(sl) \entoncesL i = ObtenerIdGremio(sl[i])
	}{\ly}
	\repItem{
		sonConsecutivos(obtenerIdsGrupo(sl))
	}{}
\end{RepFormal}

\subsubsection{Funci\'on de Abstracci\'on}

\begin{FunAbsDescriptiva}{e}{vector(gremio)}{si}{sistemaLaboral}

	\absItem{gremios(si) \igobs e}{\yluego}

	\absItem{(\paratodof{gremio}{g}) g \en gremios(si) \entoncesL aliados(g, si) \igobs obtenerConjuntoDeAliados(e, g)}{}

\end{FunAbsDescriptiva}

\subsubsection{Funciones auxiliares}

\tadOperacion{obtenerConjuntoDeAliados}{secu(gremio)/gs, g/gremio}{conj(gremio)}{}
\tadAxioma{obtenerConjuntoDeAliados}
{
	\textbf{if} vac\'ia?(gs) \textbf{then} \\
	\hspace*{20pt}$\emptyset$	\\
	\textbf{else} \\
		\hspace*{20pt}\textbf{if} prim(gs) \distinto g \ly idGrupo(prim(gs)) = idGrupo(g) \textbf{then} \\
			\hspace*{40pt}prim(gs) $\cup$ obtenerConjuntoDeAliados(fin(gs), g) \\
		\hspace*{20pt}\textbf{else} \\
			\hspace*{40pt}obtenerConjuntoDeAliados(fin(gs), g) \\
		\hspace*{20pt}\textbf{fi} \\
	\textbf{fi} \\
}
\vspace{5pt}

\tadOperacion{asignarIdsConsecutivos}{conj(gremio)/gs}{conj(gremio)}{}
\tadAxioma{asignarIdsConsecutivos(gs)}{asignarIdsConsecutivosDesde(gs, 0)}
\vspace{5pt}

\tadOperacion{asignarIdsConsecutivosDesde}{conj(gremio)/gs, nat/n}{conj(gremio)}{}
\tadAxioma{asignarIdsConsecutivosDesde(gs, n)}
{
	\textbf{if} $\emptyset$?(gs) \textbf{then} \\
		\hspace*{20pt}$\emptyset$	\\
	\textbf{else} \\
		\hspace*{20pt}asignarIdGrupo(asignarIdGremio(dameUno(gs),n),n) $\cup$ \\
		asignarIdsConsecutivosDesde(sinUno(gs), n+1) \\
	\textbf{fi} \\
}
\vspace{5pt}

\tadOperacion{idsGrupoActualizados}{sistemaLaboral/sl0, sistemaLaboral/sl, gremio/g1, gremio/g2}{bool}{}
\tadAxioma{idsGrupoActualizados(sl0,sl,g1,g2)}{}
\vspace{5pt}

\tadOperacion{todosActualizados}{sistemaLaboral/sl0, sistemaLaboral/sl, gremio/g1, gremio/g2, conj(gremios)/gs}{bool}{}
\tadAxioma{todosActualizados(sl0,sl,g1,g2,gs)}
{
	\textbf{if} $\emptyset$?(gs) \textbf{then} \\
		\hspace*{20pt}true	\\
	\textbf{else} \\
		\hspace*{20pt}\textbf{if} idGremio(dameUno(gs)) = max(idGremio(g1),idGremio(g2)) \textbf{then} \\
			\hspace*{40pt}prim(gs) $\cup$ obtenerConjuntoDeAliados(fin(gs), g) \\
		\hspace*{20pt}\textbf{else} \\
			\hspace*{40pt}obtenerConjuntoDeAliados(fin(gs), g) \\
		\hspace*{20pt}\textbf{fi} \\
	\textbf{fi} \\

	\textbf{fi} \\
}
\vspace{5pt}

\tadOperacion{maxIdGrupo}{}{}{}
\tadAxioma{}{}
\vspace{5pt}

\tadOperacion{sonConsecutivos}{}{}{}
\tadAxioma{}{}
\vspace{5pt}

\tadOperacion{obtenerIdsGrupo}{}{}{}
\tadAxioma{}{}
\vspace{5pt}