\algoritmoI{Iniciar}{\param{in}{sl}{sistemaLaboral}}{\param{}{res}{estrT}}
{
	\state res.sistema \asig sl
	\state res.paritariasAbiertas \asig Vacío()
	\state res.acuerdosVigentes \asig Vacía()
	\state res.\#aperturas \asig Vacía()
	\state

	\state InicializarAcuerdosVigentes(res)
	\state InicializarAperturas(res)
}
{0}

\algoritmoIvoid{AbrirParitaria}{\param{in/out}{ tmp}{estrT}, \param{in}{gr}{gremio}, \param{in}{p}{nat}, \param{in}{t}{nat}, \param{in}{es}{conj(empresa)}}
{
	\If{0 \menor Obtener\#Aperturas(tmp, \&gr)}
		\state RemoverAcuerdo(tmp, \&gr)
	\endif
	\state

	\state AgregarParitaria(tmp, \&NuevaParitaria(\&gr, p, t))
}
{0}

\algoritmoIvoid{CerrarAcuerdo}{\param{in/out}{ tmp}{estrT}, \param{in}{gr}{gremio} , \param{in}{pcj}{nat}}
{

	\state \var{itLista(puntero(acuerdo))}{itAcuerdos} \asig CrearIt(ObtenerAcuerdosDeAliados(tmp, \&gr))
	\while{HaySiguiente(itAcuerdos) \lyl ObtenerPorcentaje(*Siguiente(itAcuerdos)) \menor pcj}
		\state

		\state AgregarParitaria(tmp, ObtenerParitaria(*Siguiente(itAcuerdos)))

		\state EliminarSiguiente(itAcuerdos)

		\state
		\state Avanzar(itAcuerdos)
	\endwhile
	\state

	\state \var{puntero(paritaria)}{pa} \asig RemoverParitaria(tmp, \&gr)
	\state AgregarComoSiguiente(itAcuerdos, \&NuevoAcuerdo(pa, pcj))
}
{0}

\algoritmoIvoid{Reabrir}{\param{in/out}{ tmp}{estrT},  \param{in}{gr}{gremio}}
{
	\state \var{puntero(paritaria)}{pa} \asig RemoverAcuerdo(tmp, \&gr)

	\state AgregarParitaria(tmp, pa)
}
{0}

\algoritmoI{Gremios}{\param{in}{tmp}{estrT}}{\param{}{res}{conj(gremio)}}
{
	\state res \asig ObtenerGremios(tmp.sl)
}
{0}

\algoritmoI{EnParitarias}{\param{in}{tmp}{estrT}, \param{in}{gr}{gremio}}{\param{}{res}{bool}}
{
	\state \var{itConj(puntero(paritaria))}{itParitarias} \asig CrearIt(tmp.paritariasAbiertas)
	\while{HaySiguiente(itParitarias) \lyl ObtenerGremio(*Siguiente(itParitarias)) \distinto \&gr}
		\state
		\state Avanzar(itParitarias)
	\endwhile
	\state

	\state res \asig HaySiguiente(itParitarias)
}
{0}

\algoritmoI{GremiosNegociando}{\param{in}{tmp}{estrT}}{\param{}{res}{conj(gremio)}}
{
	\state res \asig Vacío()
	\state

	\state \var{itConj(puntero(paritaria))}{itParitarias} \asig CrearIt(tmp.paritariasAbiertas)
	\while{HaySiguiente(itParitarias)}
		\state
		\state Agregar(res, *ObtenerGremio(*Siguiente(itParitarias)))
		
		\state
		\state Avanzar(itParitarias)
	\endwhile
}
{0}

\algoritmoI{EmpresasNegociando}{\param{in}{tmp}{estrT}}{\param{}{res}{conj(empresa)}}
{
	\state res \asig Vacío()
	\state

	\state \var{itConj(puntero(paritaria))}{itParitarias} \asig CrearIt(tmp.paritariasAbiertas)
	\while{HaySiguiente(itParitarias)}
		\state
		\state conj(empresa) empresasParitaria \asig ObtenerEmpresas(*ObtenerGremio(*Siguiente(itParitarias)))
		\state res \asig Union(res, empresasParitaria)

		\state
		\state Avanzar(itParitarias)
	\endwhile
}
{0}

\algoritmoI{TrabajadoresNegociando}{\param{in}{tmp}{estrT}}{\param{}{res}{nat}}
{
	\state res \asig 0
	\state

	\state \var{itConj(puntero(paritaria))}{itParitarias} \asig CrearIt(tmp.paritariasAbiertas)
	\while{HaySiguiente(itParitarias)}
		\state

		\state \var{nat}{\#afiliadosParitaria} \asig Obtener\#Afiliados(*ObtenerGremio(*Siguiente(itParitarias)))
		\state res \asig res + \#afiliadosParitaria

		\state
		\state Avanzar(itParitarias)
	\endwhile
}
{0}

\algoritmoI{GremioConflictivo}{\param{in}{tmp}{estrT}}{\param{}{res}{gremio}}
{
	\state \var{itConj(puntero(gremio))}{itGremios} \asig Gremios(tmp)
	\state

	\state \var{puntero(gremio)}{gremioConflictivo} \asig Siguiente(itGremios)
	\state \var{nat}{maxAperturas} \asig Obtener\#DeAperturas(tmp, gremioConflictivo)
	\state Avanzar(itGremios)
	\state

	\while{HaySiguiente(itGremios)}
		\state

		\state \var{nat}{\#aperturas} \asig Obtener\#DeAperturas(tmp, Siguiente(itGremios))

		\If{maxAperturas \menor \#aperturas}

			\state maxAperturas \asig \#aperturas
			\state gremioConflictivo \asig Siguiente(itGremios)
		\endif

		\state
		\state Avanzar(itGremios)
	\endwhile
	\state

	\state res \asig *gremioConflictivo
}
{0}

\algoritmoIvoid{InicializarAcuerdosVigentes}{\param{in/out}{ tmp}{estrT}}
{
	\state \var{nat}{indice} \asig 0
	\while{indice \menor Obtener\#GruposDeAliados(tmp.sistema)}
		\state

		\state tmp.acuerdosVigentes[indice] \asig Vacía()

		\state
		\state indice \asig indice + 1
	\endwhile

}
{0}

\algoritmoIvoid{InicializarAperturas}{\param{in/out}{ tmp}{estrT}}
{
	\state \var{nat}{indice} \asig 0
	\while{indice \menor Cardinal(Gremios(tmp))}
		\state

		\state tmp.\#aperturas[indice] \asig 0

		\state
		\state indice \asig indice + 1
	\endwhile
}
{0}

\algoritmoIvoid{AgregarParitaria}{\param{in/out}{ tmp}{estrT}, \param{in}{pa}{puntero(paritaria)}}
{
	\state Agregar(tmp.paritariasAbiertas, pa)
}
{0}

\algoritmoI{RemoverParitaria}{\param{in/out}{ tmp}{estrT}, \param{in}{gr}{puntero(gremio)}}{\param{}{res}{puntero(paritaria)}}
{
	\state \var{itConj(puntero(paritaria))}{itParitarias} \asig CrearIt(tmp.paritariasAbiertas)
	\while{ObtenerGremio(*Siguiente(itParitarias)) != gr}
		\state
		\state Avanzar(itParitarias)
	\endwhile
	\state

	\state res \asig Siguiente(itParitarias)

	\state EliminarSiguiente(itParitarias)
}
{0}

\algoritmoI{RemoverAcuerdo}{\param{in/out}{ tmp}{estrT}, \param{in}{gr}{puntero(gremio)}}{\param{}{res}{puntero(paritaria)}}
{
	\state \var{itLista(puntero(acuerdo))}{itAcuerdos} \asig CrearIt(ObtenerAcuerdosDeAliados(tmp, gr))
	\while{ObtenerGremio(*Siguiente(itAcuerdos)) != gr}
		\state
		\state Avanzar(itAcuerdos)  
	\endwhile
	\state

	\state res \asig ObtenerParitaria(*Siguiente(itAcuerdos))

	\state EliminarSiguiente(itAcuerdos)
}
{0}

\algoritmoI{ObtenerAcuerdosDeAliados}{\param{in}{tmp}{estrT}, \param{in}{gr}{puntero(gremio)}}{\param{}{res}{lista(puntero(acuerdo))}}
{
	\state \var{idGrupo}{id} \asig ObtenerIdGrupoAliados(tmp.sistema, gr)

	\state res \asig tmp.acuerdosVigentes[id]
}
{0}

\algoritmoI{Obtener\#DeAperturas}{\param{in}{tmp}{estrT}, \param{in}{gr}{puntero(gremio)}}{\param{}{res}{nat}}
{
	\state \var{idGremio}{id} \asig ObtenerId(*gr)

	\state res \asig tmp.\#aperturas[id]
}
{0}