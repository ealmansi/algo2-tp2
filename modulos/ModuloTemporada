temporada se representa con estrT

donde estrT es: tupla<
	#alianzas: nat,
	gremios: conj(gremios),
	paritariasAbiertas: conj(pparitaria),
	acuerdosVigentes: arreglo_dimensionable de lista(pacuerdo),
>

---

Iniciar: in sl: sistemaLaboral -> res: temporada
iIniciar: in sl: sistemaLaboral -> res: estrT
	
	res.#alianzas <- Dame#Alianzas(sl)
	res.gremios <- DameGremios(sl)
	res.paritariasAbiertas <- Vacío()
	res.acuerdosVigentes <- CrearArreglo(res.#alianzas)

	nat indice <- 0
	while indice < res.#alianzas
		res.acuerdosVigentes[indice] <- Vacía()
		indice <- indice + 1


---

AbrirParitaria: in/out tmp: temporada, in gr: pgremio, in p: nat, in t: nat, in es: conj(empresa)
iAbrirParitaria: in/out tmp: estrT, in gr: pgremio, in p: nat, in t: nat, in es: conj(empresa)
	
	Agregar(estrT.paritariasAbiertas, &NuevaParitaria(gr, p, t))


---

CerrarAcuerdo: in/out tmp: temporada, in gr : pgremio , in pcj:nat 
iCerrarAcuerdo: in/out tmp: estrT, in gr : pgremio , in pcj:nat

	itConj(pparitaria) itParitarias <- CrearIt(estrT.paritariasAbiertas)

	while DameGremio(*Siguiente(itParitarias)) != gr
		Avanzar(itParitarias)

	pparitaria p <- Siguiente(itParitarias)
	EliminarSiguiente(itParitarias)

	nat numeroAlianza <- DameNumeroAlianza(*gr)

	itLista(pacuerdo) itAcuerdos <- CrearIt(estrT.acuerdosVigentes[numeroAlianza])

	while HaySiguiente(itAcuerdos) && DamePorcentaje(*Siguiente(itAcuerdos)) < pcj
		Agregar(tmp.paritariasAbiertas, DameParitaria(*Siguiente(itAcuerdos)))
		EliminarSiguiente(itAcuerdos)

	AgregarComoSiguiente(itAcuerdos,&NuevoAcuerdo(p, porcentaje))

---

Reabrir: in/out tmp: temporada, in gr: pgremio
iReabrir: in/out tmp: estrT,  in gr: pgremio

	nat numAlianza <- DameNumeroAlianza(*gr)

	itLista(pacuerdo) itAcuerdos <- CrearIt(estrT.acuerdosVigentes[numAlianza])

	while DameGremio(*Siguiente(itAcuerdos)) != gr
		Avanzar(itAcuerdos)

	pparitaria p <- DameParitaria(*Siguiente(itAcuerdos))

	EliminarSiguiente(itAcuerdos)

	Agregar(estrT.paritariasAbiertas, p)


---

Gremios: in/out tmp: temporada -> res: conj(gremio)
iGremios: in/out tmp: estrT -> res: conj(gremio)



---

EnParitarias: in/out tmp: temporada, in gr: pgremio -> res: bool
iEnParitarias: in/out tmp: estrT, in gr: pgremio -> res: bool

	itConj(pparitaria) itParitarias <- CrearIt(estrT.paritariasAbiertas)

	while HaySiguiente(itParitarias) && DameGremio(*Siguiente(itParitarias)) != gr
		Avanzar(itParitarias)

	res <- HaySiguiente(itParitarias)

---

GremiosNegociando: in/out tmp: temporada -> res: conj(pgremio)
iGremiosNegociando: in/out tmp: estrT -> res: conj(pgremio)

	res <- Vacío()

	itConj(pparitaria) itParitarias <- CrearIt(estrT.paritariasAbiertas)

	while HaySiguiente(itParitarias)
		Agregar(res,DameGremio(*Siguiente(itParitarias)))
		Avanzar(itParitarias)

---

EmpresasNegociando: in/out tmp: temporada -> res: conj(empresa)
iEmpresasNegociando: in/out tmp: estrT -> res: conj(empresa)

	res <- Vacío()

	itConj(pparitaria) itParitarias <- CrearIt(estrT.paritariasAbiertas)

	while HaySiguiente(itParitarias)
		conj(empresa) empresasParitaria <- DameEmpresas(*DameGremio(*Siguiente(itParitarias)))
		res <- Union(res, empresasParitaria)
		Avanzar(itParitarias)

---

TrabajadoresNegociando: in/out tmp: temporada -> res: nat
iTrabajadoresNegociando: in/out tmp: estrT -> res: nat

	res <- 0

	itConj(pparitaria) itParitarias <- CrearIt(estrT.paritariasAbiertas)

	while HaySiguiente(itParitarias)
		nat #afiliadosParitaria <- Dame#Afiliados(*DameGremio(*Siguiente(itParitarias)))
		res <- res + #afiliadosParitaria
		Avanzar(itParitarias)

---

GremioConflictivo: in/out tmp: temporada -> res: pgremio
iGremioConflictivo: in/out tmp: estrT -> res: pgremio


